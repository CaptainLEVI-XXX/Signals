services:
  # ─── Orchestrator (Node.js + WebSocket) ─────────────
  - type: web
    name: signals-orchestrator
    runtime: node
    region: oregon
    rootDir: orchestrator
    buildCommand: npm install && npm run build
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: "3000"
      - key: RPC_URL
        value: https://data-seed-prebsc-1-s1.binance.org:8545/
      - key: CHAIN_ID
        value: "97"
      - key: SPLIT_OR_STEAL_ADDRESS
        value: "0xE8A2C0179fccc4Cc20FDBC596A3F668Faf24D56F"
      - key: ARENA_TOKEN_ADDRESS
        value: "0x82C69946Cb7d881447e70a058a47Aa5715Ae7428"
      - key: AGENT_REGISTRY_ADDRESS
        value: "0xe0D7c422Ce11C22EdF75966203058519c5Ab6a0C"
      - key: OPERATOR_PRIVATE_KEY
        sync: false  # must be set manually in Render dashboard
      - key: HOUSEBOT_PRIVATE_KEY
        sync: false  # must be set manually in Render dashboard

  # ─── Frontend (Next.js) ────────────────────────────
  - type: web
    name: signals-frontend
    runtime: node
    region: oregon
    rootDir: frontend
    buildCommand: npm install && npm run build
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: "3000"
      - key: NEXT_PUBLIC_CHAIN_ID
        value: "97"
      - key: NEXT_PUBLIC_ARENA_TOKEN_ADDRESS
        value: "0x82C69946Cb7d881447e70a058a47Aa5715Ae7428"
      - key: NEXT_PUBLIC_SPLIT_OR_STEAL_ADDRESS
        value: "0xE8A2C0179fccc4Cc20FDBC596A3F668Faf24D56F"
      - key: NEXT_PUBLIC_AGENT_REGISTRY_ADDRESS
        value: "0xe0D7c422Ce11C22EdF75966203058519c5Ab6a0C"
      - key: NEXT_PUBLIC_RPC_URL
        value: https://data-seed-prebsc-1-s1.binance.org:8545/
      - key: NEXT_PUBLIC_API_URL
        fromService:
          name: signals-orchestrator
          type: web
          envVarKey: RENDER_EXTERNAL_URL
      - key: NEXT_PUBLIC_WS_URL
        sync: false  # set manually: wss://signals-orchestrator-xxxx.onrender.com
